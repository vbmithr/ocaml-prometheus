<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Prom (prom.Prom)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">prom</a> &#x00BB; Prom</nav><h1>Module <code>Prom</code></h1></header><div class="spec module" id="module-SMap"><a href="#module-SMap" class="anchor"></a><code><span class="keyword">module</span> SMap : Containers.Map.S <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#module-SMap">SMap</a>.key := string</code></div><div class="spec module" id="module-FSet"><a href="#module-FSet" class="anchor"></a><code><span class="keyword">module</span> FSet : Containers.Set.S <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#module-FSet">FSet</a>.elt := float</code></div><div class="spec module" id="module-FMap"><a href="#module-FMap" class="anchor"></a><code><span class="keyword">module</span> FMap : Containers.Map.S <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#module-FMap">FMap</a>.key := float</code></div><div class="spec module" id="module-KLL"><a href="#module-KLL" class="anchor"></a><code><span class="keyword">module</span> <a href="KLL/index.html">KLL</a> : <a href="../Prom__/Kll/index.html#module-type-S">Prom__.Kll.S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="../Prom__/Kll/module-type-S/index.html#type-elt">elt</a> := float</code></div><dl><dt class="spec type" id="type-complex"><a href="#type-complex" class="anchor"></a><code><span class="keyword">type</span> <span>'a complex</span></code><code> = </code><code>{</code><table class="record"><tr id="type-complex.count" class="anchored"><td class="def field"><a href="#type-complex.count" class="anchor"></a><code>count : int;</code></td></tr><tr id="type-complex.sum" class="anchored"><td class="def field"><a href="#type-complex.sum" class="anchor"></a><code>sum : float;</code></td></tr><tr id="type-complex.data" class="anchored"><td class="def field"><a href="#type-complex.data" class="anchor"></a><code>data : <span class="type-var">'a</span>;</code></td></tr></table><code>}</code></dt><dt class="spec type" id="type-histogram"><a href="#type-histogram" class="anchor"></a><code><span class="keyword">type</span> histogram</code><code> = <span><span>int <a href="index.html#module-FMap">FMap</a>.t</span> <a href="index.html#type-complex">complex</a></span></code></dt><dt class="spec type" id="type-summary"><a href="#type-summary" class="anchor"></a><code><span class="keyword">type</span> summary</code><code> = <span><span>(<a href="KLL/index.html#type-t">KLL.t</a> * <a href="index.html#module-FSet">FSet</a>.t)</span> <a href="index.html#type-complex">complex</a></span></code></dt></dl><dl><dt class="spec value" id="val-cumulate"><a href="#val-cumulate" class="anchor"></a><code><span class="keyword">val</span> cumulate : <span>int <a href="index.html#module-FMap">FMap</a>.t</span> <span>&#45;&gt;</span> <span>int <a href="index.html#module-FMap">FMap</a>.t</span></code></dt><dd><p><code>cumulate hist</code> is the cumulative histogram of <code>hist</code>, suitable to ingestion by Prometheus.</p></dd></dl><dl><dt class="spec value" id="val-complex_cum_fmap"><a href="#val-complex_cum_fmap" class="anchor"></a><code><span class="keyword">val</span> complex_cum_fmap : int <span>&#45;&gt;</span> float <span>&#45;&gt;</span> <span>int <a href="index.html#module-FMap">FMap</a>.t</span> <span>&#45;&gt;</span> <a href="index.html#type-histogram">histogram</a></code></dt><dd><p><code>complex_cum count sum data</code> is a <code>complex</code> value constructed from <code>count</code>, <code>sum</code> and <code>data</code> where <code>data</code> is a cumulated histogram or CDF.</p></dd></dl><dl><dt class="spec value" id="val-complex_cum"><a href="#val-complex_cum" class="anchor"></a><code><span class="keyword">val</span> complex_cum : int <span>&#45;&gt;</span> float <span>&#45;&gt;</span> <span><span>(float * int)</span> list</span> <span>&#45;&gt;</span> <a href="index.html#type-histogram">histogram</a></code></dt><dd><p><code>complex_cum count sum data</code> is a <code>complex</code> value constructed from <code>count</code>, <code>sum</code> and <code>data</code> where <code>data</code> is a cumulated histogram or CDF.</p></dd></dl><dl><dt class="spec value" id="val-complex"><a href="#val-complex" class="anchor"></a><code><span class="keyword">val</span> complex : int <span>&#45;&gt;</span> float <span>&#45;&gt;</span> <span><span>(float * int)</span> list</span> <span>&#45;&gt;</span> <a href="index.html#type-histogram">histogram</a></code></dt><dd><p><code>complex count sum data</code> is a <code>complex</code> value constructed from <code>count</code>, <code>sum</code> and <code>data</code> where <code>data</code> is a non-cumulated histogram.</p></dd></dl><dl><dt class="spec module" id="module-LabelsMap"><a href="#module-LabelsMap" class="anchor"></a><code><span class="keyword">module</span> LabelsMap : Containers.Map.S <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#module-LabelsMap">LabelsMap</a>.key := <span>string <a href="index.html#module-SMap">SMap</a>.t</span></code></dt><dd><p>A kv map (label) uniquely identifying a time series.</p></dd></dl><dl><dt class="spec type" id="type-metric"><a href="#type-metric" class="anchor"></a><code><span class="keyword">type</span> <span>'a metric</span></code><code> = <span><span><span class="type-var">'a</span> <a href="index.html#type-series">series</a></span> <a href="index.html#module-LabelsMap">LabelsMap</a>.t</span></code></dt><dd><p>Type of a metric. A metric associates a time series to a set of labels.</p></dd></dl><dl><dt class="spec type" id="type-series"><a href="#type-series" class="anchor"></a><code><span class="keyword">and</span> <span>'a series</span></code><code> = </code><code>{</code><table class="record"><tr id="type-series.ts" class="anchored"><td class="def field"><a href="#type-series.ts" class="anchor"></a><code>ts : <span>Ptime.t option</span>;</code></td></tr><tr id="type-series.v" class="anchored"><td class="def field"><a href="#type-series.v" class="anchor"></a><code>v : <span class="type-var">'a</span>;</code></td></tr></table><code>}</code></dt><dd><p>Type of a time series. Contains an optional timestamp.</p></dd></dl><dl><dt class="spec value" id="val-create_series"><a href="#val-create_series" class="anchor"></a><code><span class="keyword">val</span> create_series : <span>?&#8288;ts:Ptime.t</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-series">series</a></span></code></dt></dl><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code></dt><dd><p>Type of a Prometheus metric. Contains a name, an optional help text, a type, and labels associated to a value.</p></dd></dl><dl><dt class="spec value" id="val-add_labels"><a href="#val-add_labels" class="anchor"></a><code><span class="keyword">val</span> add_labels : <span><span>(string * string)</span> list</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>add_labels labels t</code> will add <code>labels</code> to all series in <code>t</code>.</p></dd></dl><dl><dt class="spec value" id="val-merge"><a href="#val-merge" class="anchor"></a><code><span class="keyword">val</span> merge : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-pp"><a href="#val-pp" class="anchor"></a><code><span class="keyword">val</span> pp : <span><a href="index.html#type-t">t</a> Fmt.t</span></code></dt><dt class="spec value" id="val-pp_list"><a href="#val-pp_list" class="anchor"></a><code><span class="keyword">val</span> pp_list : <span><span><a href="index.html#type-t">t</a> list</span> Fmt.t</span></code></dt><dt class="spec value" id="val-counter"><a href="#val-counter" class="anchor"></a><code><span class="keyword">val</span> counter : <span>?&#8288;help:string</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><span>(<span><span>(string * string)</span> list</span> * <span>float <a href="index.html#type-series">series</a></span>)</span> list</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-gauge"><a href="#val-gauge" class="anchor"></a><code><span class="keyword">val</span> gauge : <span>?&#8288;help:string</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><span>(<span><span>(string * string)</span> list</span> * <span>float <a href="index.html#type-series">series</a></span>)</span> list</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-histogram"><a href="#val-histogram" class="anchor"></a><code><span class="keyword">val</span> histogram : <span>?&#8288;help:string</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><span>(<span><span>(string * string)</span> list</span> * <span><a href="index.html#type-histogram">histogram</a> <a href="index.html#type-series">series</a></span>)</span> list</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-summary"><a href="#val-summary" class="anchor"></a><code><span class="keyword">val</span> summary : <span>?&#8288;help:string</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><span>(<span><span>(string * string)</span> list</span> * <span><a href="index.html#type-summary">summary</a> <a href="index.html#type-series">series</a></span>)</span> list</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt></dl></div></body></html>